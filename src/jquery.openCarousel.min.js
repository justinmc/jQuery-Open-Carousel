(function(){window.Ocarousel=function(){function t(i){var s,e,r,n,o,a,l,c,h,u,d,g,f,p,m,_,w,v;r=this,this.ocarousel=$(i),this.ocarousel_window=$(this.ocarousel).find(".ocarousel_window"),this.frames=$(this.ocarousel_window).children().clone(),this.indicators_container=$(this.ocarousel).find(".ocarousel_indicators"),this.pagination_current=$(this.ocarousel).find(".ocarousel_pagination_current"),this.pagination_total=$(this.ocarousel).find(".ocarousel_pagination_total"),this.frames.length>1&&(this.settings={},this.settings.speed=null!=(n=$(this.ocarousel).data("ocarousel-speed"))?n:t.settings.speed,this.settings.period=null!=(o=$(this.ocarousel).data("ocarousel-period"))?o:t.settings.period,this.settings.transition=null!=(d=$(this.ocarousel).data("ocarousel-transition"))?d:t.settings.transition,this.settings.perscroll=null!=(g=$(this.ocarousel).data("ocarousel-perscroll"))?g:t.settings.perscroll,this.settings.wrapearly=null!=(f=$(this.ocarousel).data("ocarousel-wrapearly"))?f:t.settings.wrapearly,this.settings.shuffle=null!=(p=$(this.ocarousel).data("ocarousel-shuffle"))?p:t.settings.shuffle,this.settings.indicator_fill=null!=(m=$(this.ocarousel).data("ocarousel-indicator-fill"))?m:t.settings.indicator_fill,this.settings.indicator_r=null!=(_=$(this.ocarousel).data("ocarousel-indicator-r"))?_:t.settings.indicator_r,this.settings.indicator_spacing=null!=(w=$(this.ocarousel).data("ocarousel-indicator-spacing"))?w:t.settings.indicator_spacing,this.settings.indicator_cy=null!=(v=$(this.ocarousel).data("ocarousel-indicator-cy"))?v:t.settings.indicator_cy,this.settings.indicator_stroke=null!=(a=$(this.ocarousel).data("ocarousel-indicator-stroke"))?a:t.settings.indicator_stroke,this.settings.indicator_strokewidth=null!=(l=$(this.ocarousel).data("ocarousel-indicator-strokewidth"))?l:t.settings.indicator_strokewidth,this.settings.fullwidth=null!=(c=$(this.ocarousel).data("ocarousel-fullwidth"))?c:t.settings.fullwidth,this.settings.vertical=null!=(h=$(this.ocarousel).data("ocarousel-vertical"))?h:t.settings.vertical,this.settings.cycle=null!=(u=$(this.ocarousel).data("ocarousel-cycle"))?u:t.settings.cycle,this.settings.cycle&&(s=$(this.ocarousel_window).children().clone(),e=$(this.ocarousel_window).children().clone(),$(this.ocarousel_window).append(s),$(this.ocarousel_window).append(e),this.frames=$(this.ocarousel_window).children().clone(),this.active=this.frames.length/3),this.ocarousel_container=document.createElement("div"),this.ocarousel_container.className="ocarousel_window_slides",$(this.ocarousel).show(),this.timerStop(),this.ocarousel_window.html(""),$(this.ocarousel_window).get(0).appendChild(this.ocarousel_container),this.render(),this.setContainerPos(),this.timerStart())}var i;return t.prototype.ocarousel=null,t.prototype.ocarousel_window=null,t.prototype.ocarousel_container=null,t.prototype.indicators_container=null,t.prototype.frames=null,t.prototype.framesPre=null,t.prototype.framesPost=null,t.prototype.indicators=null,t.prototype.timer=null,t.prototype.active=0,t.prototype.onSlideChanged=null,t.settings={speed:500,period:4e3,transition:"scroll",perscroll:1,wrapearly:0,shuffle:!1,indicator_fill:"#ffffff",indicator_r:6,indicator_spacing:6,indicator_cy:20,indicator_stroke:"#afafaf",indicator_strokewidth:"2",fullwidth:!1,vertical:!1,cycle:!1},t.prototype.render=function(){var t,s,e,r,n,o,a,l,c,h,u;if(this.settings.shuffle&&"false"!==this.settings.shuffle&&(this.frames=i(this.frames)),$(this.ocarousel_container).html(""),l=this,$(this.frames).each(function(){return l.settings.fullwidth&&"false"!==l.settings.fullwidth&&$(this).css("width",$(l.ocarousel_window).width()),l.settings.vertical&&$(this).addClass("ocarousel_window_slides_vertical"),$(l.ocarousel_container).append(this)}),this.indicators_container.length)for($(this.indicators_container).html(""),document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttribute("version","1.1"),$(this.indicators_container).get(0).appendChild(n)):n=$(this.indicators_container).get(0),this.indicators=[],o=this.frames.length,c=0,s=this.frames.length-1,this.settings.cycle&&(c=this.frames.length/3,s=2*this.frames.length/3-1,o=this.frames.length/3),h=2*this.settings.indicator_r*o+this.settings.indicator_spacing*(o+1),n.setAttribute("width",h+"px"),t=this.settings.indicator_r+this.settings.indicator_spacing,e=u=c;s>=c?s>=u:u>=s;e=s>=c?++u:--u)a=this.settings.cycle?e%(this.frames.length/3):e,document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?(r=document.createElementNS("http://www.w3.org/2000/svg","circle"),r.className="ocarousel_link",r.setAttribute("data-ocarousel-link",a),r.setAttribute("cx",t),r.setAttribute("cy",this.settings.indicator_cy),r.setAttribute("r",this.settings.indicator_r),r.setAttribute("stroke",this.settings.indicator_stroke),r.setAttribute("stroke-width",this.settings.indicator_strokewidth),r.setAttribute("fill",e===this.active?this.settings.indicator_stroke:this.settings.indicator_fill)):(r=document.createElement("div"),r.className="ocarousel_link ocarousel_indicator ocarousel_indicator_"+(e===this.active?"active":"inactive"),r.setAttribute("data-ocarousel-link",a)),n.appendChild(r),this.indicators.push(r),$(r).data("ocarousel_index",e),t=t+2*this.settings.indicator_r+this.settings.indicator_spacing;return this.pagination_current.length&&$(this.pagination_current).html(this.active+1),this.pagination_total.length&&$(this.pagination_total).html(this.frames.length),$(this.ocarousel).find("[data-ocarousel-link]").unbind("click"),$(this.ocarousel).find("[data-ocarousel-link]").bind("click",function(t){var i;return t.preventDefault(),i=$(this).data("ocarousel-link"),null!=i?("left"===i||"Left"===i||"l"===i||"L"===i?i=l.getPrev():"right"===i||"Right"===i||"r"===i||"R"===i?i=l.getNext():"first"===i||"First"===i||"beginning"===i||"Beginning"===i?i=l.getFirst():"last"===i||"Last"===i||"end"===i||"End"===i?i=l.getLast():l.settings.cycle&&(i+=l.frames.length/3),l.scrollTo(i)):void 0}),this.settings.fullwidth?$(window).one("resize",function(){return l.render()}):void 0},t.prototype.scrollTo=function(t,i){var s,e,r,n,o,a,l,c,h,u,d,g,f;if(null==i&&(i=!1),o=this,null!=t){if(this.timerStop(),t>=this.frames.length-this.settings.wrapearly?t=0:t>=this.frames.length-this.settings.perscroll?t=this.frames.length-this.settings.perscroll:0>t&&(l=this.frames.length-this.settings.perscroll,c=this.frames.length-1-this.settings.wrapearly,t=Math.min(l,c)),this.settings.cycle){if(t<this.frames.length/3){for(s=h=d=this.frames.length-1,g=2*(this.frames.length/3);g>=d?g>=h:h>=g;s=g>=d?++h:--h)$(this.frames[s]).remove(),$(this.ocarousel_container).prepend(this.frames[s]);this.active=this.active+this.frames.length/3,t+=this.frames.length/3,this.frames=$(this.ocarousel_container).children(),this.setContainerPos()}if(t>=this.frames.length/3*2){for(s=u=0,f=this.frames.length/3-1;f>=0?f>=u:u>=f;s=f>=0?++u:--u)$(this.frames[s]).remove(),$(this.ocarousel_container).append(this.frames[s]);this.active=this.active-this.frames.length/3,t-=this.frames.length/3,this.frames=$(this.ocarousel_container).children(),this.setContainerPos()}}if($(this.ocarousel_container).stop(),a=this.getPos(t),i?this.setContainerPos(a):"fade"===this.settings.transition?this.settings.vertical?$(this.ocarousel_container).fadeOut(this.settings.speed,null).animate({top:a+"px"},0).fadeIn(o.settings.speed):$(this.ocarousel_container).fadeOut(this.settings.speed,null).animate({right:a+"px"},0).fadeIn(o.settings.speed):this.settings.vertical?$(this.ocarousel_container).animate({bottom:a+"px"},this.settings.speed):$(this.ocarousel_container).animate({right:a+"px"},this.settings.speed),null!=this.indicators&&(r=this.active,e=t,this.settings.cycle&&(r%=this.frames.length/3,e%=this.frames.length/3),document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?($(this.indicators[r]).attr("fill",this.settings.indicator_fill),$(this.indicators[e]).attr("fill",this.settings.indicator_stroke)):($(this.indicators[r]).removeClass("ocarousel_indicator_active"),$(this.indicators[r]).addClass("ocarousel_indicator_inactive"),$(this.indicators[e]).addClass("ocarousel_indicator_active"),$(this.indicators[e]).removeClass("ocarousel_indicator_inactive"))),n=this.active,this.active=t,this.pagination_current.length&&$(this.pagination_current).html(this.active+1),this.timerStart(),"function"==typeof this.onSlideChanged)return this.onSlideChanged(t,n)}},t.prototype.getPos=function(t){return this.settings.vertical?$(this.frames[t]).position().top:$(this.frames[t]).position().left},t.prototype.getNext=function(){var t,i;for(i=this.active+this.settings.perscroll,i>this.frames.length-this.settings.perscroll&&i<this.frames.length&&(i=this.frames.length-this.settings.perscroll),t=this.frames.length;t&&!$(this.frames[i]).is(":visible");)i++,i>this.frames.length-1&&(i=0),t--;return i},t.prototype.getPrev=function(){var t,i;for(i=this.active-this.settings.perscroll,0>i&&0!==this.active&&(i=0),t=this.frames.length;t&&!$(this.frames[i]).is(":visible");)i--,0>i&&(i=this.frames.length-1),t--;return i},t.prototype.getLast=function(){return this.settings.cycle?2*this.frames.length/3-1:this.frames.length-1},t.prototype.getFirst=function(){return this.settings.cycle?this.frames.length:0},t.prototype.timerStart=function(){var t;return t=this,1/0!==this.settings.period?this.timer=setInterval(function(){return t.scrollTo(t.getNext())},this.settings.period):void 0},t.prototype.timerStop=function(){return null!=this.timer?(clearInterval(this.timer),this.timer=null):void 0},t.prototype.timerToggle=function(){return null!=this.timer?this.timerStop():this.timerStart()},t.prototype.setContainerPos=function(t){return null==t&&(t=this.getPos(this.active)),this.settings.vertical?$(this.ocarousel_container).animate({bottom:t+"px"},0):$(this.ocarousel_container).animate({right:t+"px"},0)},t.prototype.remove=function(t){return t>0&&t<this.frames.length-1&&(this.frames.splice(t,1),this.render(),this.active>t)?this.scrollTo(this.active-1,!0):void 0},t.prototype.add=function(t,i){return i>0&&i<this.frames.length-1&&(this.frames.splice(i,0,t),this.render(),this.active>=i)?this.scrollTo(this.active+1,!0):void 0},i=function(t){var i,s,e,r;if(i=t.length,0===i)return!1;for(;--i;)s=Math.floor(Math.random()*(i+1)),e=t[i],r=t[s],t[i]=r,t[s]=e;return t},t}(),$(document).ready(function(){return $(".ocarousel").each(function(){return new Ocarousel(this)})})}).call(this);